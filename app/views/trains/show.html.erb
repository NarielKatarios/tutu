<p id="notice"><%= notice %></p>

<p>
  <strong>Номер поезда:</strong>
  <%= @train.number %>
</p>
<p>
  <strong>Находится на станции:</strong>
  <% if @train.current_station.present? %>
    <%= @train.current_station.title %>
  <% else %>
    Не указано
  <% end %>
</p>
<p>
  <strong>Маршрут:</strong>
  <% if @train.route.present? %>
    <%= route_full_name @train.route %>
  <% else %>
    Маршрут не назначен
  <% end %>
</p>
<p>
  <strong>Количество вагонов:</strong>
  <ul>
    <li>Плацкартных: <%= @train.wagons.each { |wagon| wagon.type == 'EconomyWagon' }.size %></li>
    <li>Купейных:    <%= @train.wagons.each { |wagon| wagon.type == 'CoupeWagon' }.size %></li>
    <li>СВ:          <%= @train.wagons.each { |wagon| wagon.type == 'SvWagon' }.size %></li>
    <li>Сидячих:     <%= @train.wagons.each { |wagon| wagon.type == 'SedentaryWagon' }.size %></li>
    <li> Вагоны:
      <% @train.wagons.each do |wagon| %>
        <%= link_to wagon.number, wagon_path(wagon) %>
      <% end %>
    </li>

    <li>
      <% if @train.sort_by_tail %>
        Нумерация вагонов с хвоста поезда
      <% else %>
        Нумерация вагонов с головы поезда
      <% end %>
    </li>
  </ul>
</p>
<p><%= link_to 'Добавить плацкартный вагон', new_train_wagons_path(@train, type: 'EconomyWagon') %></p>
<p><%= link_to 'Добавить купейный вагон',    new_train_wagons_path(@train, type: 'CoupeWagon') %></p>
<p><%= link_to 'Добавить СВ вагон',          new_train_wagons_path(@train, type: 'SvWagon') %></p>
<p><%= link_to 'Добавить сидячий вагон',     new_train_wagons_path(@train, type: 'SedentaryWagon') %></p>
</p>
<p>
  <strong>Билеты:</strong>
  <ul>
    <% @train.tickets.each do |ticket| %>
      <li>
        <b>№<%= ticket.number %></b> _
        Пользователь: <%= ticket.user&.title %>;
        Вагон: <%= ticket.wagon&.number %>;
        Станция: <%= ticket.railway_station&.title %>
      </li>
    <% end %>
  </ul>
</p>

<%= link_to 'Изменить', edit_train_path(@train) %> |
<%= link_to 'Назад', trains_path %>
